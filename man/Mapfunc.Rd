% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Mapfunc.R
\name{Mapfunc}
\alias{Mapfunc}
\title{Create Parameter Map for RTMB Model Fitting}
\usage{
Mapfunc(pin, re = FALSE)
}
\arguments{
\item{pin}{Named list of initial parameter values for the RTMB model.}

\item{re}{Logical, should random effects for measurement error (MerrorRel, MerrorRec)
be estimated? Default is \code{FALSE} (fixed at initial values).}
}
\value{
A named list suitable for the \code{map} argument in \code{RTMB::MakeADFun()},
where \code{factor(NA)} indicates fixed parameters and factor levels group
parameters to be estimated together.
}
\description{
Generates a map list to control which parameters are estimated in the RTMB
tag-recapture model, particularly for handling time-varying parameters and
optional measurement error terms.
}
\details{
This function expects \code{datain} to exist in the calling environment, containing:
\describe{
\item{ntsteps}{Total number of time steps}
\item{goodts}{Integer vector of valid time step indices to estimate}
}

The function:
\itemize{
\item Maps time-varying parameters to NA for time steps not in \code{goodts}
\item Excludes parameters containing 'sig' or 'error' from time-varying treatment
\item Always fixes \code{LsigError}, \code{LMerrorRelsigma}, and \code{LMerrorRecsigma} to NA
\item Conditionally fixes \code{MerrorRel} and \code{MerrorRec} based on \code{re} argument
}
}
\examples{
\dontrun{
# Create map without measurement error random effects
map <- Mapfunc(pin, re = FALSE)
mod <- MakeADFun(data = datain, parameters = pin, map = map)

# Allow measurement error estimation
map <- Mapfunc(pin, re = TRUE)
}

}
